Состояние гонки возникает в программном обеспечении, когда компьютерная программа,
чтобы работать должным образом, зависит от последовательности или времени процессов или потоков программы. 
Критические условия гонки вызывают недопустимое выполнение и ошибки программногообеспечения . 
Критические условия гонки часто происходят, когда процессы или потоки зависят от некоторого общего состояния.
Операции над общими состояниями выполняются в критических разделах, которые должны быть взаимоисключающими.
Несоблюдение этого правила может привести к повреждению общего состояния.

В параллельном программированиипараллельный доступ к общим ресурсам может привести к неожиданному или ошибочному поведению ,
поэтому части программы, к которым осуществляется доступ к общему ресурсу, должны быть защищены таким образом, чтобы избежать параллельного доступа.
Этот защищенный участок является критическим участком или критической областью.

Мью́текс (англ. mutex, от mutual exclusion — «взаимное исключение») — обеспечивает взаимное исключение исполнения критических участков кода. 
Классический мьютекс отличается от двоичного семафора наличием эксклюзивного владельца, который и должен его освобождать (т.е. переводить в незаблокированное состояние).

Семафор – это объект, который используется для контроля доступа нескольких потоков до общего ресурса. В общем случае это какая-то переменная,
состояние которой изменяется каждым из потоков. Текущее состояние переменной определяет доступ к ресурсам.

В pthreads семафор – это переменная типа sem_t, которая может находиться в заданном числе состояний. Каждый поток может увеличить счётчик семафора, или уменьшить его.

Замечание: иногда мьютекс называют двоичным семафором, указывая не то, что мьютекс может находиться в двух состояниях.
Но здесь есть важное отличие: разблокировать мьютекс может только тот поток, который его заблокировал, семафор же может «разблокировать» любой поток.


gcc -pthread -c mutex.c
gcc -pthread mutex.o -o mutex
./mutex

gcc -pthread -c fact.c
gcc -pthread fact.o -o fact 
./fact --k 5 --pnum=4 --mod=10

gcc -pthread -c dead.c
gcc -pthread dead.o -o dead
./dead 